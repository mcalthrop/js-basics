<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>JS Sandbox</title>
    <link rel="stylesheet" type="text/css" href="css/index.css"/>
</head>
<body>
<h1>JS Sandbox</h1>

<p>Here's what you do: </p>
<ul>
    <li>Open the JS console</li>
    <li>Follow the instructions below</li>
</ul>

<h2>Closures</h2>

<p>When you loaded this page, some variables were declared &ndash;
    see <a href="src/index.js" target="_blank"><code>src/index.js</code></a> for the code.</p>

<p>To see the values of these variables, copy and paste the following into the JS console:</p>

<pre>
console.log('numbers:', numbers);
console.log('scores:', scores);
console.log('context.scores:', context.scores);
</pre>

<h3>Setting the context of a <code>forEach()</code> anonymous function</h3>

<p>If we use a JavaScript <a
    href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach"
    target="_blank"><code>forEach()</code></a> loop without providing any context, we can see the value of
    <code>this</code> within the anonymous function:</p>

<pre>
numbers.forEach(function (number, index) {
    var newNumber = number / 100;

    if (index === 0) {
        console.log('this:', this);
    }
    this.scores.push(newNumber);
    console.log('index:', index, '; number:', number, '; newNumber:', newNumber, '; context:', context);
});
</pre>

<p>Now see what happens when we provide it with some context:</p>

<pre>
numbers.forEach(function (number, index) {
    var newNumber = number + 1;

    if (index === 0) {
        console.log('this:', this);
    }
    this.scores.push(newNumber);
    console.log('index:', index, '; number:', number, '; newNumber:', newNumber, '; context:', context);
}.bind(context));
</pre>

<p>Let's check those variables to see what has changed:</p>

<pre>
console.log('numbers:', numbers);
console.log('scores:', scores);
console.log('context.scores:', context.scores);
</pre>

<script src="dist/bundle.js"></script>
</body>
</html>
